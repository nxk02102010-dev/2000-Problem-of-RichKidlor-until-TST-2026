https://oj.clue.edu.vn/problem/prevoi26_collect


#include <bits/stdc++.h>
using namespace std;
#define int long long
const int INF = (int)4e18;

int n;
int m[200005], d[200005], g[200005];
int M[200005], D[200005];
int dp[200005];

signed main(){
    ios::sync_with_stdio(false);
    cin.tie(nullptr);
    cin >> n;
    for(int i = 1; i <= n; i++) cin >> m[i];
    for(int i = 1; i < n; i++) cin >> d[i];
    for(int i = 1; i <= n; i++) cin >> g[i];
    for(int i = 1; i <= n; i++){
        M[i] = M[i-1] + m[i];
        D[i] = D[i-1] + (i > 1 ? d[i-1] : 0);
    }
    int q; 
    cin >> q;
    while(q--){
        int W;
        cin >> W;
        multiset<int> S;
        dp[0] = 0;
        S.insert(dp[0] + g[1] - D[1]);
        int L = 0;
        for(int i = 1; i <= n; i++){
            while(L < i && M[i] - M[L] > W){
                auto it = S.find(dp[L] + g[L+1] - D[L+1]);
                if(it != S.end()) S.erase(it);
                L++;
            }
            if(S.empty()){
                dp[i] = INF;
            } else {
                dp[i] = g[i] + D[i] + *S.begin();
            }
            if(i < n){
                S.insert(dp[i] + g[i+1] - D[i+1]);
            }
        }
        cout << dp[n] << '\n';
    }
    return 0;
}
