Cho dÃ£y sá»‘ nguyÃªn ğ´ = (ğ‘1
, ğ‘2
, â€¦ , ğ‘ğ‘›
), tÃ¬m má»™t dÃ£y con dÃ i nháº¥t gá»“m cÃ¡c pháº§n tá»­ liÃªn tiáº¿p cá»§a ğ´
thá»a mÃ£n: Tá»“n táº¡i má»™t sá»‘ nguyÃªn ğ‘‘ > 1 sao cho má»i pháº§n tá»­ trong dÃ£y con Ä‘Ã³ Ä‘á»u chia háº¿t cho ğ‘‘.


#include<bits/stdc++.h>
using namespace std;
#define int long long
int G(int a,int b){
    if(a < 0) a = -a;
    if(b < 0) b = -b;
    while(b){
        int r = a % b;
        a = b;
        b = r;
    }
    return a;
}
signed main(){
    freopen("CDSUBSEG.INP","r",stdin);
    freopen("CDSUBSEG.OUT","w",stdout);
    int t;cin >> t;
    while(t--){
        int n;cin >> n;
        vector<int> a(n);
        for(int &i : a) cin >>i;
        vector<pair<int,int>> cur,nxt;
        #define F first
        #define S second
        int ans = 0;
        for(int i = 0;i < n;i++){
            nxt.clear();
            nxt.push_back({a[i],1});
            for(auto v : cur){
                int ng = G(v.F,a[i]);
                if(nxt.back().F == ng){
                    nxt.back().S = max(nxt.back().S,v.S + 1);
                }
                else nxt.push_back({ng,v.S + 1});
            }
            cur = nxt;
            for(auto v : cur) if(v.F > 1) ans = max(ans,v.S);
        }
        cout << ans << '\n';
    }
    cerr<<"ok";
}
