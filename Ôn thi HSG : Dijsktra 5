Cho má»™t Ä‘á»“ thá»‹ vÃ´ hÆ°á»›ng gá»“m n Ä‘á»‰nh vÃ  m cáº¡nh, má»—i cáº¡nh cÃ³ trá»ng sá»‘ dÆ°Æ¡ng.
Bá»‘n Ä‘á»‰nh Ä‘áº·c biá»‡t Ä‘Æ°á»£c cho trÆ°á»›c: A, B, C, D.
ğŸ‘¤ NhÃ¢n váº­t 1: Aaron
Aaron sáº½ chá»n má»™t Ä‘Æ°á»ng Ä‘i ngáº¯n nháº¥t tá»« Ä‘á»‰nh A Ä‘áº¿n Ä‘á»‰nh B
(tá»©c lÃ  tá»•ng trá»ng sá»‘ cÃ¡c cáº¡nh trÃªn Ä‘Æ°á»ng Ä‘i lÃ  nhá» nháº¥t cÃ³ thá»ƒ).
Náº¿u tá»“n táº¡i nhiá»u Ä‘Æ°á»ng Ä‘i ngáº¯n nháº¥t, Aaron cÃ³ thá»ƒ chá»n báº¥t ká»³ má»™t Ä‘Æ°á»ng nÃ o trong sá»‘ Ä‘Ã³.
ğŸ‘¤ NhÃ¢n váº­t 2: Hasun
Sau khi Aaron Ä‘Ã£ chá»n xong má»™t Ä‘Æ°á»ng Ä‘i ngáº¯n nháº¥t tá»« A Ä‘áº¿n B:
Táº¥t cáº£ cÃ¡c cáº¡nh thuá»™c Ä‘Æ°á»ng Ä‘i cá»§a Aaron trá»Ÿ thÃ nh miá»…n phÃ­ (trá»ng sá»‘ = 0).
CÃ¡c cáº¡nh cÃ²n láº¡i giá»¯ nguyÃªn trá»ng sá»‘ ban Ä‘áº§u.
Hasun cáº§n Ä‘i tá»« C Ä‘áº¿n D vá»›i tá»•ng chi phÃ­ nhá» nháº¥t.
ğŸ¯ NHIá»†M Vá»¤
HÃ£y xÃ¡c Ä‘á»‹nh chi phÃ­ nhá» nháº¥t mÃ  Hasun cÃ³ thá»ƒ Ä‘áº¡t Ä‘Æ°á»£c, trong trÆ°á»ng há»£p Aaron lá»±a chá»n Ä‘Æ°á»ng Ä‘i ngáº¯n nháº¥t sao cho Hasun Ä‘Æ°á»£c lá»£i nháº¥t.



#include<bits/stdc++.h>
using namespace std;
#define int long long
#define F first
#define S second
const int MAX = 100100,INF = 1e18;
struct E{
    int v,w,id;
};
vector<E> g[MAX],dag[MAX];
int n,m,ans = INF,A,B,C,D;
vector<int> distA,distB;
vector<int> dijsktra(int s,const vector<int> &free){
    vector<int> dist(n + 1,INF);
    priority_queue<pair<int,int>,vector<pair<int,int>>,greater<pair<int,int>>> q;
    q.push({0,s});
    dist[s] = 0;
    while(q.size()){
        auto top = q.top();
        q.pop();
        int u = top.S;
        int w1 = top.F;
        for(auto e : g[u]){
            int w2 = free[e.id] ? 0 : e.w;
            if(dist[e.v] > w1 + w2){
                dist[e.v] = w1 + w2;
                q.push({dist[e.v],e.v});
            }
        }
    }
    return dist;
}
vector<int> cur,freeE;
void dfs(int u){
    if(u == B){
        auto distC = dijsktra(C,freeE);
        ans = min(ans,distC[D]);
        return;
    }
    for(auto &e : dag[u]){
        freeE[e.id] = 1;
        dfs(e.v);
        freeE[e.id] = 0;
    }
}
signed main(){
    ios::sync_with_stdio(0);cin.tie(0);cout.tie(0);
    cin >> n >> m;
    cin >> A >> B >> C >> D;
    for(int i = 0;i < m;i++){
        int a,b,c;cin >> a >> b >> c;
        g[a].push_back({b,c,i});
        g[b].push_back({a,c,i});
    }
    distA = dijsktra(A,vector<int>(m,0));
    distB = dijsktra(B,vector<int>(m,0));
    int shor = distA[B];
    for(int u = 1;u <= n;u++){
        for(auto &e : g[u]){
            if(distA[u] + e.w + distB[e.v] == shor){
                dag[u].push_back(e);
            }
        }
    }
    freeE.assign(m,0);
    dfs(A);
    cout << (ans == INF ? -1 : ans) << '\n';
}
